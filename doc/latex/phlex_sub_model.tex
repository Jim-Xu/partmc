A sub model is used during solving to calculate parameters based on the current model state for use by reactions.

The available sub models are\+:
\begin{DoxyItemize}
\item \mbox{\hyperlink{phlex_sub_model_UNIFAC}{U\+N\+I\+F\+AC Activity Coefficients}}
\end{DoxyItemize}

The general input format for a sub-\/model can be found \mbox{\hyperlink{input_format_sub_model}{here}}.

General instructions for adding a new aerosol representation can be found \mbox{\hyperlink{phlex_sub_model_add}{here}}. \hypertarget{phlex_sub_model_UNIFAC}{}\section{Phlexible Module for Chemistry\+: U\+N\+I\+F\+AC Activity Coefficients}\label{phlex_sub_model_UNIFAC}
The U\+N\+I\+F\+AC activity coefficient sub model calculates activity coefficients for species in an aerosol phase based on the current aerosol phase composition. The {\ttfamily json} object for this \mbox{\hyperlink{phlex_sub_model}{sub model}} is of the form\+:


\begin{DoxyCode}
\{ "pmc-data" : [
  \{
    "type" : "SUB\_MODEL\_UNIFAC",
    "phases" : [
      "some phase",
      "some other phase"
    ],
    "functional groups" : \{
      "CH3" : \{
        "main group" : "CH2",
        "volume param" : 0.9011,
        "surface param" : 0.8480
      \},
      "CH2" : \{
        "main group" : "CH2",
        "volume param" : 0.6744,
        "surface param" : 0.5400
      \},
      "CH=CH" : \{
        "main group" : "C=C",
        "volume param" : 1.1167,
        "suface param" : 0.8670
      \}
    \},
    "main groups" : \{
      "CH2" : \{
        "interactions with" : \{
          "C=C" : -35.36
        \}
      \},
      "C=C" : \{
        "interactions with" : \{
          "CH2" : 86.02
        \}
      \}
    \}
  \},
  ...
]\}
\end{DoxyCode}
 The key-\/value pair {\bfseries type} is required and must be {\bfseries S\+U\+B\+\_\+\+M\+O\+D\+E\+L\+\_\+\+U\+N\+I\+F\+AC}. The key-\/value pair {\bfseries phases} is also required, and its value must be an array of strings that correspond to valid \mbox{\hyperlink{phlex_aero_phase}{aerosol phases}}. The key-\/value pair {\bfseries \char`\"{}functional
 groups\char`\"{}} is also required, and must contain a set of key-\/value pairs whose keys are the names of U\+N\+I\+F\+AC functions groups, and whose values are a set of key value pairs that contain, at minimum\+:
\begin{DoxyItemize}
\item {\bfseries \char`\"{}main group\char`\"{}} \+: a string that corresponds to a key in the {\bfseries \char`\"{}main groups\char`\"{}} set.
\item {\bfseries \char`\"{}volume param\char`\"{}} \+: the floating-\/point volume parameter for this functional group.
\item {\bfseries \char`\"{}surface param\char`\"{}} \+: this floating-\/point surface parameter for this functional group. The last required key-\/value pair is {\bfseries \char`\"{}main groups\char`\"{}} whose value must be a set of key-\/value pairs whose keys are the names of the U\+N\+I\+F\+AC main groups and whose values are a set key-\/pairs that contain, at minimum, {\bfseries \char`\"{}interaction with\char`\"{}} whose value is a set of key-\/value pairs whose keys are the names of the other {\bfseries \char`\"{}main groups\char`\"{}} and whose values are the floating-\/point interation parameters for that interaction. Each main group may contain up to one interaction with each other main group, and may not contain an interaction with itself. Missing interactions are assumed to be 0.\+0.
\end{DoxyItemize}

Species in the specified phase for whom acitivity coefficients will be calculated must contain a key-\/value pair {\bfseries \char`\"{}\+U\+N\+I\+F\+A\+C groups\char`\"{}} whose value is a set of key value pairs that correspond with members of the {\bfseries \char`\"{}functional groups\char`\"{}} set and whose values are the integer number of instances of a particular functional group in this species. For the above example U\+N\+I\+F\+AC model, the following species would be valid and included in activity coefficient calculations\+: 
\begin{DoxyCode}
\{ "pmc-data" : [
  \{
    "name" : "my species",
    "type" : "CHEM\_SPEC",
    "phase" : "AEROSOL",
    "UNIFAC groups" : \{
      "CH3" : 4,
      "C=C" : 1
    \}
  \},
  \{
    "name" : "my other species",
    "type" : "CHEM\_SPEC",
    "phase" : "AEROSOL",
    "UNIFAC groups" : \{
      "CH3" : 2,
      "CH2" : 4
    \},
  \},
  \{
    "name" : "some phase",
    "type" : "AERO\_PHASE",
    "species" : \{ "my species", "my other species" \}
  \}
]\}
\end{DoxyCode}
 \hypertarget{input_format_sub_model}{}\section{Input J\+S\+ON Object Format\+: Sub Model (general)}\label{input_format_sub_model}
A {\ttfamily json} object containing the information required by a \mbox{\hyperlink{phlex_sub_model}{sub model}} of the form\+:


\begin{DoxyCode}
\{ "pmc-data" : [
  \{
    "type" : "SUB\_MODEL\_TYPE",
    "some parameter" : 123.34,
    "some other parameter" : true,
    "nested parameters" : \{
      "sub param 1" : 12.43,
      "sub param other " : "some text",
      ...
    \},
    ...
  \},
  ...
]\}
\end{DoxyCode}
 Sum models must have a unique {\bfseries type} that corresponds to a valid sub model type. These include\+:


\begin{DoxyItemize}
\item U\+N\+I\+F\+AC Activity
\end{DoxyItemize}

All remaining data are optional and may include and valid {\bfseries json} value, including nested objects. However, extending types will have specific requirements for the remaining data. \hypertarget{phlex_sub_model_add}{}\section{Phlexible Module for Chemistry\+: Adding a Sub Model}\label{phlex_sub_model_add}
T\+O\+DO write instructions 