\hypertarget{aero__state_8_f90}{}\section{aero\+\_\+state.\+F90 File Reference}
\label{aero__state_8_f90}\index{aero\+\_\+state.\+F90@{aero\+\_\+state.\+F90}}


The \mbox{\hyperlink{namespacepmc__aero__state}{pmc\+\_\+aero\+\_\+state}} module.  


\subsection*{Data Types}
\begin{DoxyCompactItemize}
\item 
type \mbox{\hyperlink{structpmc__aero__state_1_1aero__state__t}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+t}}
\begin{DoxyCompactList}\small\item\em The current collection of aerosol particles. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Modules}
\begin{DoxyCompactItemize}
\item 
module \mbox{\hyperlink{namespacepmc__aero__state}{pmc\+\_\+aero\+\_\+state}}
\begin{DoxyCompactList}\small\item\em The \mbox{\hyperlink{structpmc__aero__state_1_1aero__state__t}{aero\+\_\+state\+\_\+t}} structure and assocated subroutines. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions/\+Subroutines}
\begin{DoxyCompactItemize}
\item 
elemental integer function \mbox{\hyperlink{namespacepmc__aero__state_a94155bf7fa94e7c3ab722a5a1dacac98}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+n\+\_\+part}} (aero\+\_\+state)
\begin{DoxyCompactList}\small\item\em Return the current number of particles. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_ade0790e3c1fbf87ed303a8ab22de32e3}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+copy\+\_\+weight}} (aero\+\_\+state\+\_\+from, aero\+\_\+state\+\_\+to)
\begin{DoxyCompactList}\small\item\em Copies weighting information for an {\ttfamily aero\+\_\+state}. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_ae949175272a73f61c851a2ac4a58c712}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+set\+\_\+weight}} (aero\+\_\+state, aero\+\_\+data, weight\+\_\+type, exponent)
\begin{DoxyCompactList}\small\item\em Sets the weighting functions for an {\ttfamily aero\+\_\+state}. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a82d688a836cb8ed88c46dd010247d3c1}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+set\+\_\+n\+\_\+part\+\_\+ideal}} (aero\+\_\+state, n\+\_\+part)
\begin{DoxyCompactList}\small\item\em Set the ideal number of particles to the given value. The {\ttfamily aero\+\_\+state\%awa} must be already set correctly. \end{DoxyCompactList}\item 
integer function \mbox{\hyperlink{namespacepmc__aero__state_a070d20781c622419c7823654680595b4}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+weight\+\_\+class\+\_\+for\+\_\+source}} (aero\+\_\+state, source)
\begin{DoxyCompactList}\small\item\em Determine the appropriate weight class for a source. \end{DoxyCompactList}\item 
integer function \mbox{\hyperlink{namespacepmc__aero__state_a9bfa000bf19e64be5f1cf5aeebabe535}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+total\+\_\+particles}} (aero\+\_\+state, i\+\_\+group, i\+\_\+class)
\begin{DoxyCompactList}\small\item\em Returns the total number of particles in an aerosol distribution. \end{DoxyCompactList}\item 
integer function \mbox{\hyperlink{namespacepmc__aero__state_a38cf96ea2f1a3ee938bda68e93975cae}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+total\+\_\+particles\+\_\+all\+\_\+procs}} (aero\+\_\+state, i\+\_\+group, i\+\_\+class)
\begin{DoxyCompactList}\small\item\em Returns the total number of particles across all processes. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a748f903f70f90956fc02765c46f5e541}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+zero}} (aero\+\_\+state)
\begin{DoxyCompactList}\small\item\em Resets an aero\+\_\+state to have zero particles per bin. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a473f49b7a4680623facd70a44576b7e8}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+add\+\_\+particle}} (aero\+\_\+state, aero\+\_\+particle, aero\+\_\+data, allow\+\_\+resort)
\begin{DoxyCompactList}\small\item\em Add the given particle. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a87d926e9b2ca5930053d449d771efcee}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+remove\+\_\+particle\+\_\+no\+\_\+info}} (aero\+\_\+state, i\+\_\+part)
\begin{DoxyCompactList}\small\item\em Remove the given particle without recording it. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_ad28b72502e5bb9caa40eac383d9bb22e}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+remove\+\_\+particle\+\_\+with\+\_\+info}} (aero\+\_\+state, i\+\_\+part, aero\+\_\+info)
\begin{DoxyCompactList}\small\item\em Remove the given particle and record the removal. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_ac19bda6a4cd1c2a3ea9f6cadf9dc9bb6}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+remove\+\_\+particle}} (aero\+\_\+state, i\+\_\+part, record\+\_\+removal, aero\+\_\+info)
\begin{DoxyCompactList}\small\item\em Remove the given particle and possibly record the removal. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_aabf1b375475462cc54740039ad556a83}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+remove\+\_\+rand\+\_\+particle\+\_\+from\+\_\+bin}} (aero\+\_\+state, i\+\_\+bin, i\+\_\+class, aero\+\_\+particle)
\begin{DoxyCompactList}\small\item\em Remove a randomly chosen particle from the given bin and return it. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a4f965b4eaeeec1b01e2299016a3680cf}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+dup\+\_\+particle}} (aero\+\_\+state, aero\+\_\+data, i\+\_\+part, n\+\_\+part\+\_\+mean, random\+\_\+weight\+\_\+group)
\begin{DoxyCompactList}\small\item\em Add copies or remove a particle, with a given mean number of resulting particles. \end{DoxyCompactList}\item 
real(kind=dp) function \mbox{\hyperlink{namespacepmc__aero__state_a6e14396858e4011e0b36ebc5cd653bc2}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+particle\+\_\+num\+\_\+conc}} (aero\+\_\+state, aero\+\_\+particle, aero\+\_\+data)
\begin{DoxyCompactList}\small\item\em The number concentration of a single particle (m$^\wedge$\{-\/3\}). \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a08e7e95e0c08167046e3238693096dee}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+num\+\_\+conc\+\_\+for\+\_\+reweight}} (aero\+\_\+state, aero\+\_\+data, reweight\+\_\+num\+\_\+conc)
\begin{DoxyCompactList}\small\item\em Save the correct number concentrations for later use by \mbox{\hyperlink{namespacepmc__aero__state_a38c69c82e0dbc601557ff505d0513ba6}{aero\+\_\+state\+\_\+reweight()}}. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a38c69c82e0dbc601557ff505d0513ba6}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+reweight}} (aero\+\_\+state, aero\+\_\+data, reweight\+\_\+num\+\_\+conc)
\begin{DoxyCompactList}\small\item\em Reweight all particles after their constituent volumes have been altered. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_ad9c12bba90caa58b86882ebfe4a4335c}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+add}} (aero\+\_\+state, aero\+\_\+state\+\_\+delta, aero\+\_\+data)
\begin{DoxyCompactList}\small\item\em {\ttfamily aero\+\_\+state += aero\+\_\+state\+\_\+delta}, including combining the weights, so the new concentration is the weighted average of the two concentrations. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a9960460ba28e89f4f253dcbdb482fff7}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+add\+\_\+particles}} (aero\+\_\+state, aero\+\_\+state\+\_\+delta, aero\+\_\+data)
\begin{DoxyCompactList}\small\item\em {\ttfamily aero\+\_\+state += aero\+\_\+state\+\_\+delta}, with the weight of {\ttfamily aero\+\_\+state} left unchanged, so the new concentration is the sum of the two concentrations, computed with {\ttfamily aero\+\_\+state\%awa}. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_af3652445ddd2485a544cc426b3248481}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+prepare\+\_\+weight\+\_\+for\+\_\+add}} (aero\+\_\+state, aero\+\_\+data, i\+\_\+group, i\+\_\+class, n\+\_\+add, allow\+\_\+doubling, allow\+\_\+halving)
\begin{DoxyCompactList}\small\item\em Change the weight if necessary to ensure that the addition of about {\ttfamily n\+\_\+add} computational particles will give the correct final particle number. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a28368fd18fc170709b6809de1930037d}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+add\+\_\+aero\+\_\+dist\+\_\+sample}} (aero\+\_\+state, aero\+\_\+data, aero\+\_\+dist, sample\+\_\+prop, create\+\_\+time, allow\+\_\+doubling, allow\+\_\+halving, n\+\_\+part\+\_\+add)
\begin{DoxyCompactList}\small\item\em Generates a Poisson sample of an {\ttfamily aero\+\_\+dist}, adding to {\ttfamily aero\+\_\+state}, with the given sample proportion. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_ab4369f9cfc8e1fdc80c6cd2aced773c9}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+rand\+\_\+particle}} (aero\+\_\+state, i\+\_\+part)
\begin{DoxyCompactList}\small\item\em Choose a random particle from the aero\+\_\+state. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a45e47d79732741df0dacf15d65d7b4a7}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+sample\+\_\+particles}} (aero\+\_\+state\+\_\+from, aero\+\_\+state\+\_\+to, aero\+\_\+data, sample\+\_\+prob, removal\+\_\+action)
\begin{DoxyCompactList}\small\item\em Generates a random sample by removing particles from aero\+\_\+state\+\_\+from and adding them to aero\+\_\+state\+\_\+to, which must be already allocated (and should have its weight set). \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a1ccf923e3212b8800371ebd59156ff8f}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+sample}} (aero\+\_\+state\+\_\+from, aero\+\_\+state\+\_\+to, aero\+\_\+data, sample\+\_\+prob, removal\+\_\+action)
\begin{DoxyCompactList}\small\item\em Generates a random sample by removing particles from aero\+\_\+state\+\_\+from and adding them to aero\+\_\+state\+\_\+to, transfering weight as well. This is the equivalent of \mbox{\hyperlink{namespacepmc__aero__state_ad9c12bba90caa58b86882ebfe4a4335c}{aero\+\_\+state\+\_\+add()}}. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a5535ba7076130a468b1b71a36b64e408}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+to\+\_\+binned}} (bin\+\_\+grid, aero\+\_\+data, aero\+\_\+state, aero\+\_\+binned)
\begin{DoxyCompactList}\small\item\em Create binned number and mass arrays. \end{DoxyCompactList}\item 
integer function, dimension(aero\+\_\+state\+\_\+n\+\_\+part(aero\+\_\+state)) \mbox{\hyperlink{namespacepmc__aero__state_a4c0671e83504e6bd71735b876c78ec2f}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+ids}} (aero\+\_\+state)
\begin{DoxyCompactList}\small\item\em Returns the I\+Ds of all particles. \end{DoxyCompactList}\item 
real(kind=dp) function, dimension(aero\+\_\+state\+\_\+n\+\_\+part(aero\+\_\+state)) \mbox{\hyperlink{namespacepmc__aero__state_a95c9f58cc1ce505a24fe1cb88eef1918}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+diameters}} (aero\+\_\+state, aero\+\_\+data)
\begin{DoxyCompactList}\small\item\em Returns the diameters of all particles. \end{DoxyCompactList}\item 
real(kind=dp) function, dimension(aero\+\_\+state\+\_\+n\+\_\+part(aero\+\_\+state)) \mbox{\hyperlink{namespacepmc__aero__state_a575abf5653d2e972e8eb66a7a30ab187}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+dry\+\_\+diameters}} (aero\+\_\+state, aero\+\_\+data)
\begin{DoxyCompactList}\small\item\em Returns the dry diameters of all particles. \end{DoxyCompactList}\item 
real(kind=dp) function, dimension( aero\+\_\+state\+\_\+n\+\_\+part(aero\+\_\+state)) \mbox{\hyperlink{namespacepmc__aero__state_a5ddd78918027552f0815529f4c0128fb}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+mobility\+\_\+diameters}} (aero\+\_\+state, aero\+\_\+data, env\+\_\+state)
\begin{DoxyCompactList}\small\item\em Returns the mobility diameters of all particles. \end{DoxyCompactList}\item 
real(kind=dp) function, dimension(aero\+\_\+state\+\_\+n\+\_\+part(aero\+\_\+state)) \mbox{\hyperlink{namespacepmc__aero__state_a94804b9cdd9effc574cfb0cc178f329b}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+volumes}} (aero\+\_\+state, aero\+\_\+data, include, exclude)
\begin{DoxyCompactList}\small\item\em Returns the volumes of all particles. \end{DoxyCompactList}\item 
real(kind=dp) function, dimension(aero\+\_\+state\+\_\+n\+\_\+part(aero\+\_\+state)) \mbox{\hyperlink{namespacepmc__aero__state_ae9fa229a50576c4bce900bcb21c4e73c}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+masses}} (aero\+\_\+state, aero\+\_\+data, include, exclude)
\begin{DoxyCompactList}\small\item\em Returns the masses of all particles. \end{DoxyCompactList}\item 
real(kind=dp) function, dimension(aero\+\_\+state\+\_\+n\+\_\+part(aero\+\_\+state)) \mbox{\hyperlink{namespacepmc__aero__state_a31dd92148979397fc0b7bc5fd056a064}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+num\+\_\+concs}} (aero\+\_\+state, aero\+\_\+data)
\begin{DoxyCompactList}\small\item\em Returns the number concentrations of all particles. \end{DoxyCompactList}\item 
real(kind=dp) function \mbox{\hyperlink{namespacepmc__aero__state_a6e7b882b542eb7dd907ec490ea45c29b}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+total\+\_\+num\+\_\+conc}} (aero\+\_\+state, aero\+\_\+data)
\begin{DoxyCompactList}\small\item\em Returns the total number concentration. \end{DoxyCompactList}\item 
real(kind=dp) function, dimension(aero\+\_\+state\+\_\+n\+\_\+part(aero\+\_\+state)) \mbox{\hyperlink{namespacepmc__aero__state_a0bf5046e0ca5be2e39b436d6c7b3a4cb}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+mass\+\_\+entropies}} (aero\+\_\+state, aero\+\_\+data, include, exclude, group)
\begin{DoxyCompactList}\small\item\em Returns the mass-\/entropies of all particles. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a370d03980bec87029d569a9b9116740d}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+mixing\+\_\+state\+\_\+metrics}} (aero\+\_\+state, aero\+\_\+data, d\+\_\+alpha, d\+\_\+gamma, chi, include, exclude, group)
\begin{DoxyCompactList}\small\item\em Returns the mixing state metrics of the population. \end{DoxyCompactList}\item 
real(kind=dp) function, dimension(aero\+\_\+state\+\_\+n\+\_\+part(aero\+\_\+state)) \mbox{\hyperlink{namespacepmc__aero__state_a24a909f4a78590222a3d1f940e2e6863}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+approx\+\_\+crit\+\_\+rel\+\_\+humids}} (aero\+\_\+state, aero\+\_\+data, env\+\_\+state)
\begin{DoxyCompactList}\small\item\em Returns the approximate critical relative humidity for all particles (1). \end{DoxyCompactList}\item 
real(kind=dp) function, dimension(aero\+\_\+state\+\_\+n\+\_\+part(aero\+\_\+state)) \mbox{\hyperlink{namespacepmc__aero__state_a1618326e97d290803c642af677073d9c}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+crit\+\_\+rel\+\_\+humids}} (aero\+\_\+state, aero\+\_\+data, env\+\_\+state)
\begin{DoxyCompactList}\small\item\em Returns the critical relative humidity for all particles (1). \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a9618d3e95a4e97e71b154586a2c8bc25}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+to\+\_\+binned\+\_\+dry}} (bin\+\_\+grid, aero\+\_\+data, aero\+\_\+state, aero\+\_\+binned)
\begin{DoxyCompactList}\small\item\em Does the same thing as aero\+\_\+state\+\_\+to\+\_\+bin() but based on dry radius. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a061271c7cf7c3592bb385c1b7bfbedfc}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+double}} (aero\+\_\+state, aero\+\_\+data, i\+\_\+group, i\+\_\+class)
\begin{DoxyCompactList}\small\item\em Doubles number of particles in the given weight group. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_ac5109f61fd1f0631a218a410154da5c1}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+halve}} (aero\+\_\+state, i\+\_\+group, i\+\_\+class)
\begin{DoxyCompactList}\small\item\em Remove approximately half of the particles in the given weight group. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a166b2bd2407e5342dd3c5a45b0ba421e}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+rebalance}} (aero\+\_\+state, aero\+\_\+data, allow\+\_\+doubling, allow\+\_\+halving, initial\+\_\+state\+\_\+warning)
\begin{DoxyCompactList}\small\item\em Double or halve the particle population in each weight group to maintain close to {\ttfamily n\+\_\+part\+\_\+ideal} particles per process, allocated equally amongst the weight groups. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_ac4ca03b5c8c9684e8442edc2df12a020}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+scale\+\_\+weight}} (aero\+\_\+state, aero\+\_\+data, i\+\_\+group, i\+\_\+class, weight\+\_\+ratio, allow\+\_\+doubling, allow\+\_\+halving)
\begin{DoxyCompactList}\small\item\em Scale the weighting of the given group/class by the given ratio, altering particle number as necessary to preserve the number concentration. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a3c40aa98c11c8dfe6e662f2bbd8672e9}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+mix}} (aero\+\_\+state, del\+\_\+t, mix\+\_\+timescale, aero\+\_\+data, specify\+\_\+prob\+\_\+transfer)
\begin{DoxyCompactList}\small\item\em Mix the aero\+\_\+states between all processes. Currently uses a simple all-\/to-\/all diffusion. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_ae546d85939653c1b2c7d52121d5f2bc6}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+mpi\+\_\+alltoall}} (send, recv)
\begin{DoxyCompactList}\small\item\em Do an M\+PI all-\/to-\/all transfer of aerosol states. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_ab056de58c6dda08da7f81ef695326c89}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+bin\+\_\+average\+\_\+comp}} (aero\+\_\+state, bin\+\_\+grid, aero\+\_\+data)
\begin{DoxyCompactList}\small\item\em Set each aerosol particle to have its original total volume, but species volume ratios given by the total species volume ratio within each bin. This preserves the (weighted) total species volume per bin as well as per-\/particle total volumes. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a3a54c3ceabc9c8f2bb878555a6b4c98a}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+bin\+\_\+average\+\_\+size}} (aero\+\_\+state, bin\+\_\+grid, aero\+\_\+data, bin\+\_\+center, preserve\+\_\+number)
\begin{DoxyCompactList}\small\item\em Set each aerosol particle to have its original species ratios, but total volume given by the average volume of all particles within each bin. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a7e64dc08790a4600076982a43fe76221}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+make\+\_\+dry}} (aero\+\_\+state, aero\+\_\+data)
\begin{DoxyCompactList}\small\item\em Make all particles dry (water set to zero). \end{DoxyCompactList}\item 
integer function \mbox{\hyperlink{namespacepmc__aero__state_a9f65a578f1f08ed22c56a96686743cfd}{pmc\+\_\+aero\+\_\+state\+::pmc\+\_\+mpi\+\_\+pack\+\_\+size\+\_\+aero\+\_\+state}} (val)
\begin{DoxyCompactList}\small\item\em Determines the number of bytes required to pack the given value. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a4123bbc6bc887c5d4b7a6feae25be534}{pmc\+\_\+aero\+\_\+state\+::pmc\+\_\+mpi\+\_\+pack\+\_\+aero\+\_\+state}} (buffer, position, val)
\begin{DoxyCompactList}\small\item\em Packs the given value into the buffer, advancing position. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a1fbfce661ac4cf88b383e88a44e0a9b6}{pmc\+\_\+aero\+\_\+state\+::pmc\+\_\+mpi\+\_\+unpack\+\_\+aero\+\_\+state}} (buffer, position, val)
\begin{DoxyCompactList}\small\item\em Unpacks the given value from the buffer, advancing position. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_ac8b1291fc517ab1d3ffe9642ab577c6c}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+mpi\+\_\+gather}} (aero\+\_\+state, aero\+\_\+state\+\_\+total, aero\+\_\+data)
\begin{DoxyCompactList}\small\item\em Gathers data from all processes into one aero\+\_\+state on process 0. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_acb748f0c0c6c37180e896af05acb1c19}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+netcdf\+\_\+dim\+\_\+aero\+\_\+particle}} (aero\+\_\+state, \mbox{\hyperlink{fractal_8_f90_a4e89f3f850921ff84a6dfce8b166ad50}{ncid}}, dimid\+\_\+aero\+\_\+particle)
\begin{DoxyCompactList}\small\item\em Write the aero particle dimension to the given Net\+C\+DF file if it is not already present and in any case return the associated dimid. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a7d32f436e51ba2ff96838b47e2169585}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+netcdf\+\_\+dim\+\_\+aero\+\_\+removed}} (aero\+\_\+state, \mbox{\hyperlink{fractal_8_f90_a4e89f3f850921ff84a6dfce8b166ad50}{ncid}}, dimid\+\_\+aero\+\_\+removed)
\begin{DoxyCompactList}\small\item\em Write the aero removed dimension to the given Net\+C\+DF file if it is not already present and in any case return the associated dimid. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a2118eb683c0dc350e8f48a59ea8ed8ce}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+input\+\_\+netcdf}} (aero\+\_\+state, \mbox{\hyperlink{fractal_8_f90_a4e89f3f850921ff84a6dfce8b166ad50}{ncid}}, aero\+\_\+data)
\begin{DoxyCompactList}\small\item\em Read full state. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a6626b0ca62809bfeb3137aba559963d1}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+sort}} (aero\+\_\+state, aero\+\_\+data, bin\+\_\+grid, all\+\_\+procs\+\_\+same)
\begin{DoxyCompactList}\small\item\em Sorts the particles if necessary. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacepmc__aero__state_a9ce29f42aed338fe38218ecc4bbfa158}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+check}} (aero\+\_\+state, aero\+\_\+data)
\begin{DoxyCompactList}\small\item\em Check that aerosol state data is consistent. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
integer, parameter \mbox{\hyperlink{namespacepmc__aero__state_a585d061ace6ecfefa6eaadeb8efbeb5d}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+tag\+\_\+mix}} = 4987
\begin{DoxyCompactList}\small\item\em M\+PI tag for mixing particles between processes. \end{DoxyCompactList}\item 
integer, parameter \mbox{\hyperlink{namespacepmc__aero__state_a8016b38f6c38806de95b72ffaecbe212}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+tag\+\_\+gather}} = 4988
\begin{DoxyCompactList}\small\item\em M\+PI tag for gathering between processes. \end{DoxyCompactList}\item 
integer, parameter \mbox{\hyperlink{namespacepmc__aero__state_a47a81bec0174512abf54faf2673da5c3}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+tag\+\_\+scatter}} = 4989
\begin{DoxyCompactList}\small\item\em M\+PI tag for scattering between processes. \end{DoxyCompactList}\item 
integer, parameter \mbox{\hyperlink{namespacepmc__aero__state_afae976ee50ab7c0415628dd99a6feded}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+weight\+\_\+none}} = 1
\begin{DoxyCompactList}\small\item\em Single flat weighting scheme. \end{DoxyCompactList}\item 
integer, parameter \mbox{\hyperlink{namespacepmc__aero__state_a72b0c9b3118a486936fe3c50c4d908f6}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+weight\+\_\+flat}} = 2
\begin{DoxyCompactList}\small\item\em Single flat weighting scheme. \end{DoxyCompactList}\item 
integer, parameter \mbox{\hyperlink{namespacepmc__aero__state_a2c80e8cba61697786d2302e44cd041bd}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+weight\+\_\+power}} = 3
\begin{DoxyCompactList}\small\item\em Power-\/law weighting scheme. \end{DoxyCompactList}\item 
integer, parameter \mbox{\hyperlink{namespacepmc__aero__state_aa014d0549b2455e245bef4959b781af3}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+weight\+\_\+nummass}} = 4
\begin{DoxyCompactList}\small\item\em Coupled number/mass weighting scheme. \end{DoxyCompactList}\item 
integer, parameter \mbox{\hyperlink{namespacepmc__aero__state_af731fa16fa6f5f7dcb5dde7bc5118b5a}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+weight\+\_\+flat\+\_\+source}} = 5
\begin{DoxyCompactList}\small\item\em Flat weighting by source. \end{DoxyCompactList}\item 
integer, parameter \mbox{\hyperlink{namespacepmc__aero__state_a496284ecee4a72a18a45e67f5c17e610}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+weight\+\_\+power\+\_\+source}} = 6
\begin{DoxyCompactList}\small\item\em Power-\/law weighting by source. \end{DoxyCompactList}\item 
integer, parameter \mbox{\hyperlink{namespacepmc__aero__state_a22b883c1a2ba3797a44ab2a4104c9d2a}{pmc\+\_\+aero\+\_\+state\+::aero\+\_\+state\+\_\+weight\+\_\+nummass\+\_\+source}} = 7
\begin{DoxyCompactList}\small\item\em Coupled number/mass weighting by source. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
The \mbox{\hyperlink{namespacepmc__aero__state}{pmc\+\_\+aero\+\_\+state}} module. 

